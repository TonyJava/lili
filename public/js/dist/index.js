define("dist/index",["lib/jquery","./models/ajax","./models/popbox","./models/validate","lib/kalendae","lib/highcharts"],function(t){var e=t("lib/jquery");window.$=e;var i=t("./models/ajax"),a=t("./models/popbox");if(t("./models/validate"),e(".ajax-form").on("submit",i.ajaxForm),-1!==location.href.indexOf("notice")&&(t("lib/kalendae"),new Kalendae.Input("date",{months:1,format:"YYYY-MM-DD"})),document.getElementById("charts")){t("lib/highcharts");var r=JSON.parse(e("#data-charts").val()),n={categories:[],data:[]};for(var s in r)n.categories.push(s),n.data.push(r[s]);n.title="teach"===e("#data-charts").attr("data-flg")?"被提问":"提问",e("#charts").highcharts({chart:{},title:{text:n.title+"走势图",style:{color:"#900f49",fontSize:"28px",fontFamily:"MicroSoft YaHei"}},xAxis:{categories:n.categories},yAxis:{title:{text:n.title+"个数",style:{color:"#ff775c",fontFamily:"MicroSoft YaHei",fontWeight:"normal",fontSize:"14px"}}},legend:{enabled:!1},credits:{enabled:!1},tooltip:{formatter:function(){var t;return t=""+this.x+n.title+"个数： "+this.y+"个"}},series:[{type:"column",name:"问题个数",data:n.data}]})}e(".btn-del").on("click",function(){if(!confirm("确定删除吗？"))return!1;var t=e(this).attr("href"),i=new a.tinyTips;return e.post(t,{},function(t){1===t.flg?(e(".tiny-tips").html('<span class="tiny-right"></span>'+t.msg+'<span class="tiny-end"></span>'),setTimeout(function(){t.redirect?window.location.href=t.redirect:window.location.reload()},2e3)):(i.close(),new a.tinyTips("error",t.msg))}),!1}),e(".teach-reply .btn-reply").on("click",function(){var t,i=e(this).parents("tbody");i.find(".answer").length?i.find("textarea").focus():(t='<tr class="answer form-inline"><td class="q">回答：</td><td class="aleft"><textarea name="reply"></textarea><a class="btn-reply btn q-reply">提交回答</a><a class="btn-reply btn cancel">取消</a></td></tr>',e(t).appendTo(i),i.find(".answer").hide().fadeIn("fast"))}),e("tbody").delegate(".q-reply","click",function(){var t=e(this).parents("tbody");if(!t.find("textarea").val().length)return new a.tinyTips("error","内容总不能为空吧？"),void 0;var i={id:t.attr("data-id"),answer:e.trim(t.find("textarea").val())};e.post("/teach/question",i,function(e){1===e.flg?(new a.tinyTips("right",e.msg),setTimeout(function(){t.fadeOut()},1500)):new a.tinyTips("error",e.msg)})}),e("tbody").delegate(".cancel","click",function(){var t=e(this).parents("tr");t.fadeOut("fast",function(){t.remove()})}),e("#thecat").on("change",function(){var t=e(this),i=window.location.pathname+"?tag="+t.val();window.location.href=i})}),define("dist/models/ajax",["./popbox","./validate"],function(t,e){var i=t("./popbox"),a=t("./validate"),r=function(){for(var t=0,e=$(".require"),r=e.length;r>t;t++)if(!a.require.call(e[t]))return!1;this.id;var n=$(this).serialize(),s=new i.tinyTips;return $.ajax({url:$(this).attr("action"),type:$(this).attr("method"),data:n,dataType:"json",beforsend:function(){},success:function(t){1===t.flg?($(".tiny-tips").html('<span class="tiny-right"></span>'+t.msg+'<span class="tiny-end"></span>'),setTimeout(function(){t.redirect?window.location.href=t.redirect:window.location.reload()},2e3)):2===t.flg?(s.close(),$("#answers").html('<div class="grey-tips">'+t.answers.a+"</div>")):(s.close(),new i.tinyTips("error",t.msg))}}),!1};e.ajaxForm=r}),define("dist/models/popbox",[],function(t,e){function i(t,e){var i=this;this.render(),e||this.el.on("click",function(){i.close(),t.hide()})}function a(t,e,a){this.flag=t||"load",this.tips=e||'<em class="tiny-loading"></em>给力提交中……',this.time=a||2e3,this._overlay=new i(this,!0),this.render(t,e,a)}i.prototype.render=function(){this.el=$('<div class="overlay"></div>').appendTo("body")},i.prototype.close=function(){var t=this.el;t.remove()},e.overlay=i,e.init=function(t,e){var a=e?"":'<a class="close-btn close"></a>',r=$('<div class="popbox" style="opacity:0">'+a+'<div class="popbox-bd">'+t+"</div></div>").appendTo("body"),n=new i(r,!0);return r.css("margin-top",-Math.ceil(r.height()/2+150)),r.animate({marginTop:"+=50",opacity:1},500),r.find(".close").on("click",function(){r.animate({marginTop:"-=50",opacity:0},500,function(){r.remove(),n.close()})}),!1},a.prototype.render=function(){this.box=$('<div id="ajax_tips" class="tiny-tips-wrap" style="opacity:0"><div class="tiny-tips"><span class="tiny-'+this.flag+'"></span>'+this.tips+'<span class="tiny-end"></span></div></div>').appendTo("body");var t=this.box;if(t.css("margin-top",-Math.ceil(t.height()/2+150)),t.animate({marginTop:"-=50",opacity:1},500),"load"!=this.flag){var e=this;setTimeout(function(){e.close()},e.time)}},a.prototype.close=function(){var t=this.box,e=this;return"load"==this.flag?(t.remove(),e._overlay.close(),void 0):(t.animate({marginTop:"-=50",opacity:0},500,function(){t.remove(),e._overlay.close()}),void 0)},e.tinyTips=a}),define("dist/models/validate",["./popbox"],function(t,e){function i(t,e,i){$(t).next("span").html('<em class="help-'+e+'"></em>'+i)}var a={realname:{name:"真实姓名",rex:"^[一-龥]{2,}$",tips:"请输入真实姓名！",error:"真实姓名由中文组成！"},username:{name:"用户名",rex:"^[\\w]{3,10}",tips:"请输入用户名！",error:"用户名由字母、数字、下划线组成！"},email:{name:"邮箱",rex:"^([a-zA-Z0-9]+[_|\\_|\\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\\_|\\.]?)*[a-zA-Z0-9]+\\.[a-zA-Z]{2,3}$",tips:"请输入邮箱",error:"邮箱格式出错！"},password:{name:"密码",rex:"^[\\w]{6,12}$",tips:"请输入6位以上的密码",error:"请输入6位以上的密码！"},repassword:{name:"重复密码",rex:"^[\\w]{6,12}$",tips:"请重复输入密码",error:"请输入6位以上的密码！"},website:{name:"网站名称",rex:"^[^\\s]+$",tips:"请输入网站名称",error:"网站名称至少两个字！"},url:{name:"网站地址",rex:"^[a-zA-z]+://[^\\s]*$",tips:"请输入网站地址",error:"网站地址出错！"},q:{name:"问题",rex:"^[^\\s]+$",tips:"请输入问题！",error:"问题不能为空哦！"}},r=function(){var t=this.name,e=$.trim(this.value);if("repassword"===t&&e!==$.trim($("#password").val()))return i(this,"error","两次密码不一致！"),!1;var r=RegExp(a[t].rex,"gi");if(r.test(e)){if("e-login"===$(this).attr("data-flag"))return $(this).next().html(""),!1;i(this,"right",""),this.style.cssText=""}else i(this,"error",a[t].error)};e.blurValidate=r,e.defTips=function(){i(this,"tips",a[this.name].tips)};var n=t("./popbox"),t=function(){var t=this.name,e=$.trim(this.value);if(0==e.length)return new n.tinyTips("error",a[t].name+"不能为空！"),!1;if("repassword"===t&&e!==$.trim($("#password").val()))return new n.tinyTips("error","两次密码不一致！"),!1;var i=RegExp(a[t].rex,"gi");return i.test(e)?!0:(new n.tinyTips("error",a[t].error),!1)};e.require=t});